@(endPoints: List[EndPoint])

@import helper._

@displayStreams(streams: List[Resource]) = {

  @if(streams.length > 0) {
	  <h1>Your streams</h1> 
	  
	  <ul>
	    @for(stream <- streams) {
	      <li>
	      @includeStream(stream)
	      </li>
	    }
	  </ul>
  }

}

@layout("Manage", session) {
 
  <h1>Register new device</h1>
 
   @helper.form(action = routes.CtrlEndPoint.add()) {
    <dl>
      <input input type="text" name="label" required placeholder="Label of the device" class="inputL" />
      <input input type="url" name="url" placeholder="Publically reachable URL (optional)" class="inputL" />
      <input type="submit" value="Register" class="buttonLG"/>
    </dl>
  }
  
  @if(endPoints.length > 0) {
  <h1>Your resources</h1>
     
  <ul>
    @for(endPoint <- endPoints) {
      <li>
        <a href="@routes.CtrlEndPoint.get(endPoint.id)">@endPoint.label</a> (@endPoint.getTextDescription())
          <ul>
			      @Resource.getByEndPoint(endPoint).map { resource =>
			          <li>
			          @includeResource(resource, false)
			          </li>
			       }  
        </ul>
      </li>
    }
  </ul>
  }
   
  @displayStreams(Resource.getByUserWithData(CtrlUser.getUser()))
}
