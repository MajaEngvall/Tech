# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Pages
GET        /authenticate                         controllers.Login.authenticate(openid_identifier: String)
GET        /openIDCallback                       controllers.Login.openIDCallback()
GET        /logout                               controllers.Login.logout()
GET        /                                     controllers.Application.home()
GET        /search                               controllers.Application.search()
GET        /manage                               controllers.Application.manage()
GET        /API                                  controllers.Public.about()

# Accounts
GET        /account                              controllers.CtrlUser.get()
GET        /account/edit                         controllers.CtrlUser.edit()
GET        /account/submit                       controllers.CtrlUser.submit()

# End points
GET        /endpoints/add                        controllers.CtrlEndPoint.add()
GET        /endpoints/:id                        controllers.CtrlEndPoint.get(id: Long)
GET        /endpoints/:id/edit                   controllers.CtrlEndPoint.edit(id: Long)
GET        /endpoints/:id/delete                 controllers.CtrlEndPoint.delete(id: Long)
GET        /endpoints/:id/submit                 controllers.CtrlEndPoint.submit(id: Long)
GET        /endpoints/:id/discover               controllers.CtrlEndPoint.discover(id: Long)
GET        /endpoints/:id/addResource            controllers.CtrlEndPoint.addResource(id: Long)
GET        /endpoints/:id/follow                 controllers.CtrlEndPoint.follow(id: Long)
GET        /endpoints/:id/unfollow               controllers.CtrlEndPoint.unfollow(id: Long)

# Resources
GET        /resources/:id                        controllers.CtrlResource.get(id: Long)
GET        /resources/:id/delete                 controllers.CtrlResource.delete(id: Long)
GET        /resources/:id/setPeriod              controllers.CtrlResource.setPeriod(id: Long, period: Long)
GET        /resources/:id/clearStream            controllers.CtrlResource.clearStream(id: Long)
GET        /resources/:id/follow                 controllers.CtrlResource.follow(id: Long)
GET        /resources/:id/unfollow               controllers.CtrlResource.unfollow(id: Long)

# Streams
GET        /streams/:user/:endpoint/$path<.*>    controllers.Streams.get(user: String, endpoint: String, path: String, tail: Long ?= 0, last: Long ?=0, since: Long ?= 0)
GET        /streams/:user/:endpoint              controllers.Streams.get(user: String, endpoint: String, path: String ?= "", tail: Long ?= 0, last: Long ?=0, since: Long ?= 0)
POST       /streams/:user/:endpoint/$path<.*>    controllers.Streams.post(user: String, endpoint: String, path: String)
POST       /streams/:user/:endpoint              controllers.Streams.post(user: String, endpoint: String, path: String ?= "")

# Proxy
GET        /proxy/:user/:endpoint/$path<.*>      controllers.Proxy.forwardByPath(user: String, endpoint: String, path: String)
POST       /proxy/:user/:endpoint/$path<.*>      controllers.Proxy.forwardByPath(user: String, endpoint: String, path: String)
PUT        /proxy/:user/:endpoint/$path<.*>      controllers.Proxy.forwardByPath(user: String, endpoint: String, path: String)
DELETE     /proxy/:user/:endpoint/$path<.*>      controllers.Proxy.forwardByPath(user: String, endpoint: String, path: String)

GET        /proxy/:id                            controllers.Proxy.forwardById(id: Long, arguments: String)
POST       /proxy/:id                            controllers.Proxy.forwardById(id: Long, arguments: String)
PUT        /proxy/:id                            controllers.Proxy.forwardById(id: Long, arguments: String)
DELETE     /proxy/:id                            controllers.Proxy.forwardById(id: Long, arguments: String)

# Json inspection
#GET        /users                                controllers.JsonInspect.getUserList()
#GET        /users/:user                          controllers.JsonInspect.getUser(user: String)
#GET        /endpoints/:user/:endpoint            controllers.JsonInspect.getEndPoint(user: String, endpoint: String)
#GET        /resources/:user/:endpoint/$path<.*>  controllers.JsonInspect.getResource(user: String, endpoint: String, path: String)
#GET        /db/                                  controllers.CtrlDataBase.getJson()

# Dummy thing
GET         /dummy/:id/discover                  controllers.DummyThing.discover(id: Long)
GET         /dummy/:id/sensors                   controllers.DummyThing.sensors(id: Long)
GET         /dummy/:id/sensors/temperature       controllers.DummyThing.temperature(id: Long)
GET         /dummy/:id/sensors/energy            controllers.DummyThing.energy(id: Long)
POST        /dummy/:id/actuators/print           controllers.DummyThing.print(id: Long)

# Map static resources from the /public folder to the /assets URL path
GET        /assets/*file                controllers.Assets.at(path="/public", file)
